/* eslint-disable */

var _setTimeout;

Component({
  options: {
    addGlobalClass: true,
  },
  /**
   * 组件的属性列表
   */
  properties: {
    bottom: {
      type: Number
    },
    commentData: {
      type: Object
    }
  },

  /**
   * 组件的初始数据
   */
  data: {
    focus: false,
    height: 0,
    commentValue: '',
    tooltip: '',
    content: '',
    pageX: 0,
    pageY: 0
  },

  /**
   * 组件的方法列表
   */
  methods: {

    focus(e) {
      this.setData({
        height: e.detail.height
      })
    },

    tap(e) {
      var _this = this;
      clearTimeout(_setTimeout)
      _setTimeout = setTimeout(function () {
        _this.setData({
          content: '',
          pageX: 0,
          pageY: 0
        })
      }, 5000)
      _this.setData({
        content: e.currentTarget.dataset.content,
        pageX: e.detail.x - _this.data.tooltip.length * 10,
        pageY: e.detail.y - 45
      })
    },
    copy() {
      this.setData({
        focus: false,
        pageX: 0,
        pageY: 0
      })
      this.triggerEvent('CopyComment', this.data.content)
    },
    reply() {
      clearTimeout(_setTimeout)
      this.setData({
        focus: true,
        pageX: 0,
        pageY: 0
      })
    },
    input(e) {
      this.setData({
        commentValue: e.detail.value
      })
    },
    blur() {
      this.setData({
        height: 0
      })
    },
    clear() {
      this.triggerEvent('ClearComment', this.data.content)
      this.clearValue()
    },
    clearValue() {
      this.setData({
        // focus: true,
        commentValue: ''
      })
    },
    confirm(e) {
      this.triggerEvent('AuthComment', e.detail)
      this.clearValue()
    },
    confirmButton(e) {
      this.triggerEvent('AuthCommentButton', e.currentTarget.dataset)
      this.clearValue()
    }
  }
})
